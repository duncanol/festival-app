<head>
  <title>HappySadBored</title>
</head>

<body>

  <div style="float: right; margin-right:20px;">
    {{loginButtons align="right"}}
  </div>
  
  <h1>Happy<i>Sad</i><small>Bored</small></h1>
  
  {{> intro}}
  
  {{> chathistory}}
</body>

<template name="intro">
  <ul>
    <li>Add a textfield to enter text.  Hit enter and it will pop up on the page in a persistent list and appear automatically to any other clients</li>
  </ul>
</template>


<template name="chathistory">
  <ul>
  {{#each messages}}
    <li class="chat-message" data-entry-id="{{_id}}" style="nth-of-type(even): text-align: right;">
      {{ text }} <small class="chat-message">({{ username }} felt {{tagByCategory 'emotion'}} at {{formattedDate}})</small>
      
      {{#if permittedToRemoveChat _id}} 
        {{#if deletingEntry ../_id}}
          <a href="#" id="delete-entry" data-entry-id="{{../_id}}">Delete</a>
        {{/if}}
      {{/if}}
    </li>
  {{/each}}
  </ul>
  
  {{#if permittedToInsertChat }}
    <input type="text" id="chat-text" placeholder="How ya doing?" />
    <button class="chat-text-submit" data-tag="happy" data-category="emotion">Happy :)</button>
    <button class="chat-text-submit" data-tag="sad" data-category="emotion">Sad :(</button>
    <button class="chat-text-submit" data-tag="bored" data-category="emotion">Bored :|</button>
  {{/if}}
  
  {{#unless permittedToInsertChat }}
    <p>Please log in (top RHS) to start chatting!</p>
  {{/unless}}
  
  
</template>
